<!DOCTYPE HTML>
<html>
  <head>
    <link rel="stylesheet" href="sugar_web/graphics/css/sugar-96dpi.css">
    <link rel="stylesheet" href="ta_css/activity.css">
    <style>
      body {
        margin: 0px;
        padding: 0px;
      }
      div.inline { float:left; }
    </style>
    <script src="ext_lib/jquery.js"></script>
    <script>
      $(document).ready(function() {
          $("#basictb-bt").click(function(){
              if (basic1.is_visible()){
                  basic1.hide();
              }else{
                  palette_tracker.show_palette(basic1);
              }
          });
          $("#pentb-bt").click(function(){
              if (pen_palette.is_visible()){
                  pen_palette.hide();
              }else{
                  palette_tracker.show_palette(pen_palette);
              }
          });
          $("#run-bt").click(function(){
              var starter_blocks = block_tracker.get_starter_blocks();
              for (var i=0; i<starter_blocks.length; i++){
                  starter_blocks[i].chain_exec();
              }
          });
          $("#clear-bt").click(function(){
              draw_stage.draw_tracker.clear_canvas();
          });
          $("#hideshow-bt").click(function(){
              if (!block_tracker.are_blocks_visible()){
                  block_tracker.hide_blocks();
              }else{
                  block_tracker.show_blocks();
              }
          });
      });
    </script>
  </head>
  <body>
    <div id="main-toolbar" class="toolbar">
        <button class="toolbutton" id="activity-button" title="Welcome Activity"></button>
        <hr />
        <button class="toolbutton" id="basictb-bt" title="Basic toolbar"></button>
        <button class="toolbutton" id="pentb-bt" title="Pen Palette"></button>
        <button class="toolbutton" id="run-bt" title="Run"></button>
        <button class="toolbutton" id="clear-bt" title="Clear canvas"></button>
        <button class="toolbutton" id="hideshow-bt" title="Hide/Show blocks"></button>
    </div>
    <div id="canvas">
    <div id="container2"></div>
    <script src="ext_lib/kinetic-v4.7.4.min.js"></script>
    <script src="block_lib/basic_blocks_func.js"></script>
    <script src="block_lib/pen_palette_funcs.js"></script>
    <script src="ta_lib/sprites.js"></script>
    <script src="ta_lib/block.js"></script>
    <script src="ta_lib/turtle.js"></script>
    <script src="ta_lib/blocktracker.js"></script>
    <script src="ta_lib/drawtracker.js"></script>
    <script src="ta_lib/dockdescriptor.js"></script>
    <script src="ta_lib/palettecontainer.js"></script>
    <script src="ta_lib/blockfactory.js"></script>
    <script src="ta_lib/drawstage.js"></script>
    <script src="ta_lib/blockstage.js"></script>
    <script src="ta_lib/globalvarstracker.js"></script>
    <script src="ta_lib/docktracker.js"></script>
    <script src="ta_lib/palettetracker.js"></script>
    <script src="ta_pal/basicblockpalette.js"></script>
    <script src="ta_pal/penpalette.js"></script>

    <script defer="defer">
      var global_tracker = new GlobalVarsTracker();
      var block_tracker = new BlockTracker();
      var palette_tracker = new PaletteTracker();
      var dock_tracker = new DockTracker();
      var draw_stage = new DrawStage('container2', $(window).width() - 17, $(window).height());

      block_tracker.set_palette_tracker(palette_tracker);

      global_tracker.add_var('block_tracker', block_tracker);
      global_tracker.add_var('draw_stage', draw_stage);
      global_tracker.add_var('palette_tracker', palette_tracker);
      global_tracker.add_var('dock_tracker', dock_tracker);

      var basic1 = new BasicBlockPalette(475, 100, 'green', draw_stage.layer, global_tracker);
      palette_tracker.add_palette(basic1);
      var pen_palette = new PenPalette(475, 100, 'green', draw_stage.layer, global_tracker);
      palette_tracker.add_palette(pen_palette);
    </script>
    </div>
  </body>
</html>
